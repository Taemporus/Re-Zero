!function(){"use strict";var n={"import":function(t,i,e,s,o,r){return new c(t,i,e,s,o,r).init()},run:function(t,i,e){return new s(t,i,e).init()},load:function(t,i,e,s){return new o(t,i,e,s).init()},entries:[],scripts:{},functions:[],resources:[]};function h(t,i){this.requires={},this.reqByStatus={},[c.LOADING,c.LOADED,c.FAILED].forEach(function(t){this.reqByStatus[t]={}},this),(t instanceof Array?t:t?[t]:[]).forEach(function(t){var i=n.scripts[(t="object"==typeof t&&null!==t?t:{id:t}).id],e={data:i,soft:"undefined"!=typeof t.soft&&Boolean(t.soft)};this.requires[t.id]=e;var s=i?i.status:c.LOADING;this.reqByStatus[s][t.id]=e,i&&i.requiredBy.push(this)},this),this.callback="function"==typeof i?i:function(){},this.isInitialized=!1,this.isReady=!1,this.isFinished=!1,this.isPaused=!1,this.isAborted=!1,this.success=void 0}function c(t,i,e,s,o,r){h.call(this,e,s),this.id=String(t),this.sources=i instanceof Array?i.slice():i?[i]:[],this.sourceIndex=0,this.status=c.LOADING,this.requiredBy=[],n.entries.forEach(function(t){t.requires.hasOwnProperty(this.id)&&(this.requiredBy.push(t),t.requires[this.id].data=this,t.updateDependency(this.id,this.status))},this),this["async"]=void 0===o||Boolean(o),this.defer=void 0!==r&&Boolean(r),this.preloader=void 0,this.scriptNode=void 0}function s(t,i,e){h.call(this,i,e),this.execute="function"==typeof t?t:function(){}}function o(t,i,e,s){h.call(this,e,s),this.type=String(t),this.sources=i instanceof Array?i.slice():i?[i]:[],this.sourceIndex=0,this.preloadNode=void 0}h.prototype.updateDependency=function(t,i){if(this.requires.hasOwnProperty(t)&&this.reqByStatus.hasOwnProperty(i)){for(var e in this.reqByStatus)this.reqByStatus.hasOwnProperty(e)&&delete this.reqByStatus[e][t];this.reqByStatus[i][t]=this.requires[t]}this.checkDependencies()},h.prototype.checkDependencies=function(){var t,i;for(t in i=this.reqByStatus[c.FAILED])if(i.hasOwnProperty(t)&&!i[t].soft)return void this.ready(i[t].data);for(t in i=this.reqByStatus[c.LOADING])if(i.hasOwnProperty(t))return;this.ready()},h.prototype.init=function(){if(!this.isInitialized&&!this.isAborted)return this.isInitialized=!0,"function"==typeof this._init&&this._init(),n.entries.push(this),this.checkDependencies(),this},h.prototype.ready=function(t){this.isReady||this.isAborted||(this.isReady=!0,"function"==typeof this._ready&&this._ready(t))},h.prototype.finish=function(t){if(!this.isFinished){this.isFinished=!0,this.success=!t,"function"==typeof this._finish&&this._finish(t);try{this.callback.call(this,{success:this.success,failData:this.success?void 0:t})}catch(i){try{window.console.error(i)}catch(e){}}}},h.prototype.pause=function(){this.isPaused=!0,"function"==typeof this._pause&&this._pause()},h.prototype.resume=function(){this.isPaused=!1,"function"==typeof this._resume&&this._resume()},h.prototype.abort=function(){this.isAborted=!0,this.finish(this)},((c.prototype=Object.create(h.prototype)).constructor=c).prototype._init=function(){this.preloader=new o("script",this.sources).init(),n.scripts[this.id]=this},c.prototype._ready=function(t){t?this.finish(t):(this.preloader&&(this.preloader.pause(),this.sourceIndex=this.preloader.sourceIndex),this.attachNode())},c.prototype.attachNode=function(){var i,t,e,s,o;this.isPaused?this._resume=this.attachNode:(i=this).sourceIndex<this.sources.length?(t=document.createElement("script"),(this.scriptNode=t).id=this.id,t["async"]=this["async"],t.defer=this.defer,t.addEventListener("load",function(t){i.finish()}),t.addEventListener("error",function(t){i.sourceIndex++,i.attachNode()}),t.src=String(this.sources[this.sourceIndex]),(e=document.getElementById(t.id))?(s=e.parentNode,o=e.nextSibling,e.parentNode.removeChild(e),s.insertBefore(t,o)):document.head.appendChild(t)):this.finish(this)},c.prototype._finish=function(t){this.preloader&&this.preloader.abort(),this.status=this.success?c.LOADED:c.FAILED,this.requiredBy.forEach(function(t){t.updateDependency(this.id,this.status)},this)},c.LOADING=0,c.LOADED=1,c.FAILED=-1,((s.prototype=Object.create(h.prototype)).constructor=s).prototype._init=function(){n.functions.push(this)},s.prototype._ready=function(t){this.finish(t)},s.prototype._finish=function(t){if(this.success)try{this.execute()}catch(i){try{window.console.error(i)}catch(e){}}},((o.prototype=Object.create(h.prototype)).constructor=o).prototype._init=function(){n.resources.push(this)},o.prototype._ready=function(t){t?this.finish(t):this.attachNode()},o.prototype.attachNode=function(){var i,t,e,s,o;this.isPaused?this._resume=this.attachNode:(i=this).sourceIndex<this.sources.length?((t=document.createElement("link")).rel="preload",t.as="script",t.href=String(this.sources[this.sourceIndex]),t.addEventListener("load",function(t){i.finish()}),t.addEventListener("error",function(t){i.sourceIndex++,i.attachNode()}),(e=this.preloadNode)&&(s=e.parentNode)?(o=e.nextSibling,e.parentNode.removeChild(e),s.insertBefore(t,o)):document.head.appendChild(t),this.preloadNode=t):this.finish(this)},o.prototype._finish=function(t){var i=this.preloadNode;i&&i.parentNode&&i.parentNode.removeChild(i)},window.Loader=n}();
//# sourceMappingURL=loader.min.js.map
