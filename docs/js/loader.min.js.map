{"version":3,"sources":["loader.js"],"names":["Loader","import","id","source","requires","callback","async","defer","ScriptData","init","run","fn","FunctionData","load","type","ResourceData","entries","scripts","functions","resources","LoaderEntry","this","reqByStatus","LOADING","LOADED","FAILED","forEach","status","Array","dep","scriptData","depEntry","data","soft","Boolean","requiredBy","push","isInitialized","isReady","isFinished","isPaused","isAborted","success","failData","call","String","sources","slice","sourceIndex","entry","Object","prototype","hasOwnProperty","updateDependency","preloader","scriptNode","execute","preloadNode","newStatus","checkDependencies","reqs","ready","_init","failed","_ready","finish","_finish","err","window","console","error","e","pause","_pause","resume","_resume","abort","create","constructor","attachNode","thisObj","node","oldNode","parent","next","length","document","createElement","addEventListener","src","getElementById","parentNode","nextSibling","removeChild","insertBefore","head","appendChild","rel","as","href"],"mappings":"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","file":"loader.min.js","sourcesContent":["/**\n* (c) 2023 Taemporus\n*/\n(function() {\n\t'use strict';\n\tvar Loader = {\n\t\t/**\n\t\t * Load and execute an external script once its dependencies have been imported\n\t\t * Can be referred to by others as a dependency via the 'id' specified\n\t\t */\n\t\timport: function(id, source, requires, callback, async, defer) {\n\t\t\t// Create and initialize ScriptData object\n\t\t\treturn (new ScriptData(id, source, requires, callback, async, defer)).init();\n\t\t},\n\t\t/**\n\t\t * Run a specified function once its dependencies have been met imported\n\t\t */\n\t\trun: function(fn, requires, callback) {\n\t\t\t// Create and initialize FunctionData object\n\t\t\treturn (new FunctionData(fn, requires, callback)).init();\n\t\t},\n\t\t/**\n\t\t * Preload a resource of the specified type once a specified set of dependencies has been imported\n\t\t */\n\t\tload: function(type, source, requires, callback) {\n\t\t\t// Create and initialize ResourceData object\n\t\t\treturn (new ResourceData(type, source, requires, callback)).init();\n\t\t},\n\t\tentries: [],\n\t\tscripts: {},\n\t\tfunctions: [],\n\t\tresources: []\n\t};\n\t/**\n\t * Abstract loader entry with dependencies\n\t */\n\tfunction LoaderEntry(requires, callback) {\n\t\tthis.requires = {};\n\t\tthis.reqByStatus = {};\n\t\t[ScriptData.LOADING, ScriptData.LOADED, ScriptData.FAILED].forEach(function(status) {\n\t\t\tthis.reqByStatus[status] = {};\n\t\t}, this);\n\t\t((requires instanceof Array) ? requires : (requires ? [requires] : [])).forEach(function(dep) {\n\t\t\tdep = (typeof dep === 'object' && dep !== null) ? dep : {id: dep};\n\t\t\tvar scriptData = Loader.scripts[dep.id];\n\t\t\tvar depEntry = {\n\t\t\t\tdata: scriptData,\n\t\t\t\tsoft: (typeof dep.soft !== 'undefined') ? Boolean(dep.soft) : false\n\t\t\t};\n\t\t\tthis.requires[dep.id] = depEntry;\n\t\t\tvar status = scriptData ? scriptData.status : ScriptData.LOADING;\n\t\t\tthis.reqByStatus[status][dep.id] = depEntry;\n\t\t\tif (scriptData) {\n\t\t\t\tscriptData.requiredBy.push(this);\n\t\t\t}\n\t\t}, this);\n\t\tthis.callback = (typeof callback === 'function') ? callback : function() {};\n\t\tthis.isInitialized = false;\n\t\tthis.isReady = false;\n\t\tthis.isFinished = false;\n\t\tthis.isPaused = false;\n\t\tthis.isAborted = false;\n\t\tthis.success = void 0;\n\t\tthis.failData = void 0;\n\t}\n\tLoaderEntry.prototype.updateDependency = function(id, newStatus) {\n\t\tif (\n\t\t\tObject.prototype.hasOwnProperty.call(this.requires   , id       ) &&\n\t\t\tObject.prototype.hasOwnProperty.call(this.reqByStatus, newStatus)\n\t\t) {\n\t\t\tvar status;\n\t\t\tfor (status in this.reqByStatus) {\n\t\t\t\tObject.prototype.hasOwnProperty.call(this.reqByStatus, status) &&\n\t\t\t\t\tdelete this.reqByStatus[status][id];\n\t\t\t}\n\t\t\tthis.reqByStatus[newStatus][id] = this.requires[id];\n\t\t}\n\t\tthis.checkDependencies();\n\t};\n\tLoaderEntry.prototype.checkDependencies = function() {\n\t\tvar id, reqs;\n\t\tfor (id in (reqs = this.reqByStatus[ScriptData.FAILED])) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(reqs, id) && !reqs[id].soft) {\n\t\t\t\tthis.ready(reqs[id].data);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfor (id in (reqs = this.reqByStatus[ScriptData.LOADING])) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(reqs, id)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.ready();\n\t};\n\tLoaderEntry.prototype.init = function() {\n\t\tif (this.isInitialized || this.isAborted) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isInitialized = true;\n\t\tif (typeof this._init === 'function') {this._init();}\n\t\tLoader.entries.push(this);\n\t\tthis.checkDependencies();\n\t\treturn this;\n\t};\n\tLoaderEntry.prototype.ready = function(failed) {\n\t\tif (this.isReady || this.isAborted) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isReady = true;\n\t\tif (typeof this._ready === 'function') {this._ready(failed);}\n\t};\n\tLoaderEntry.prototype.finish = function(failData) {\n\t\tif (this.isFinished) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isFinished = true;\n\t\tthis.failData = failData;\n\t\tthis.success = !this.failData;\n\t\tif (typeof this._finish === 'function') {this._finish(failData);}\n\t\ttry {\n\t\t\tthis.callback.call(this, {success: this.success, failData: (this.success ? void 0 : this.failData)});\n\t\t} catch (err) {\n\t\t\ttry {window.console.error(err);} catch (e) {}\n\t\t}\n\t};\n\tLoaderEntry.prototype.pause = function() {\n\t\tthis.isPaused = true;\n\t\tif (typeof this._pause === 'function') {this._pause();}\n\t};\n\tLoaderEntry.prototype.resume = function() {\n\t\tthis.isPaused = false;\n\t\tif (typeof this._resume === 'function') {this._resume();}\n\t};\n\tLoaderEntry.prototype.abort = function() {\n\t\tthis.isAborted = true;\n\t\tthis.finish(this);\n\t};\n\t/**\n\t * Externally sourced script\n\t */\n\tfunction ScriptData(id, source, requires, callback, async, defer) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.id = String(id);\n\t\tthis.sources = (source instanceof Array) ? source.slice() : (source ? [source] : []);\n\t\tthis.sourceIndex = 0;\n\t\tthis.status = ScriptData.LOADING;\n\t\tthis.requiredBy = [];\n\t\tLoader.entries.forEach(function(entry) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(entry.requires, this.id)) {\n\t\t\t\tthis.requiredBy.push(entry);\n\t\t\t\tentry.requires[this.id].data = this;\n\t\t\t\tentry.updateDependency(this.id, this.status);\n\t\t\t}\n\t\t}, this);\n\t\tthis.async = (typeof async !== 'undefined') ? Boolean(async) : true;\n\t\tthis.defer = (typeof defer !== 'undefined') ? Boolean(defer) : false;\n\t\tthis.preloader = void 0;\n\t\tthis.scriptNode = void 0;\n\t}\n\t// Inherit from LoaderEntry\n\tScriptData.prototype = Object.create(LoaderEntry.prototype);\n\tScriptData.prototype.constructor = ScriptData;\n\t// Methods\n\tScriptData.prototype._init = function() {\n\t\tthis.preloader = (new ResourceData('script', this.sources)).init();\n\t\tLoader.scripts[this.id] = this;\n\t};\n\tScriptData.prototype._ready = function(failed) {\n\t\tif (failed) {\n\t\t\tthis.finish(failed);\n\t\t} else {\n\t\t\tif (this.preloader) {\n\t\t\t\tthis.preloader.pause();\n\t\t\t\tthis.sourceIndex = this.preloader.sourceIndex;\n\t\t\t}\n\t\t\tthis.attachNode();\n\t\t}\n\t};\n\tScriptData.prototype.attachNode = function() {\n\t\tif (this.isPaused) {\n\t\t\tthis._resume = this.attachNode;\n\t\t\treturn;\n\t\t}\n\t\tvar thisObj = this;\n\t\tif (this.sourceIndex < this.sources.length) {\n\t\t\tvar node = document.createElement('script');\n\t\t\tthis.scriptNode = node;\n\t\t\tnode.id = this.id;\n\t\t\tnode.async = this.async;\n\t\t\tnode.defer = this.defer;\n\t\t\tnode.addEventListener('load', function() {\n\t\t\t\tthisObj.finish();\n\t\t\t});\n\t\t\tnode.addEventListener('error', function() {\n\t\t\t\tthisObj.sourceIndex++;\n\t\t\t\tthisObj.attachNode();\n\t\t\t});\n\t\t\tnode.src = String(this.sources[this.sourceIndex]);\n\t\t\tvar oldNode = document.getElementById(node.id);\n\t\t\tif (oldNode) {\n\t\t\t\tvar parent = oldNode.parentNode;\n\t\t\t\tvar next = oldNode.nextSibling;\n\t\t\t\toldNode.parentNode.removeChild(oldNode);\n\t\t\t\tparent.insertBefore(node, next);\n\t\t\t} else {\n\t\t\t\tdocument.head.appendChild(node);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.finish(this);\n\t\t}\n\t};\n\tScriptData.prototype._finish = function(failData) {\n\t\tif (this.preloader) {\n\t\t\tthis.preloader.abort();\n\t\t}\n\t\tthis.status = this.success ? ScriptData.LOADED : ScriptData.FAILED;\n\t\tthis.requiredBy.forEach(function(entry) {\n\t\t\tentry.updateDependency(this.id, this.status);\n\t\t}, this);\n\t};\n\tScriptData.LOADING = 0;\n\tScriptData.LOADED = 1;\n\tScriptData.FAILED = -1;\n\t/**\n\t * Inline script\n\t */\n\tfunction FunctionData(fn, requires, callback) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.execute = (typeof fn === 'function') ? fn : function() {};\n\t}\n\t// Inherit from LoaderEntry\n\tFunctionData.prototype = Object.create(LoaderEntry.prototype);\n\tFunctionData.prototype.constructor = FunctionData;\n\t// Methods\n\tFunctionData.prototype._init = function() {\n\t\tLoader.functions.push(this);\n\t};\n\tFunctionData.prototype._ready = function(failed) {\n\t\tthis.finish(failed);\n\t};\n\tFunctionData.prototype._finish = function(failData) {\n\t\tif (this.success) {\n\t\t\ttry {\n\t\t\t\tthis.execute();\n\t\t\t} catch (err) {\n\t\t\t\tthis.failData = this;\n\t\t\t\tthis.success = false;\n\t\t\t\ttry {window.console.error(err);} catch (e) {}\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * Generic external resource\n\t */\n\tfunction ResourceData(type, source, requires, callback) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.type = String(type);\n\t\tthis.sources = (source instanceof Array) ? source.slice() : (source ? [source] : []);\n\t\tthis.sourceIndex = 0;\n\t\tthis.preloadNode = void 0;\n\t}\n\t// Inherit from LoaderEntry\n\tResourceData.prototype = Object.create(LoaderEntry.prototype);\n\tResourceData.prototype.constructor = ResourceData;\n\t// Methods\n\tResourceData.prototype._init = function() {\n\t\tLoader.resources.push(this);\n\t};\n\tResourceData.prototype._ready = function(failed) {\n\t\tfailed ? this.finish(failed) : this.attachNode();\n\t};\n\tResourceData.prototype.attachNode = function() {\n\t\tif (this.isPaused) {\n\t\t\tthis._resume = this.attachNode;\n\t\t\treturn;\n\t\t}\n\t\tvar thisObj = this;\n\t\tif (this.sourceIndex < this.sources.length) {\n\t\t\tvar node = document.createElement('link');\n\t\t\tnode.rel = 'preload';\n\t\t\tnode.as = this.type;\n\t\t\tnode.href = String(this.sources[this.sourceIndex]);\n\t\t\tnode.addEventListener('load', function() {\n\t\t\t\tthisObj.finish();\n\t\t\t});\n\t\t\tnode.addEventListener('error', function() {\n\t\t\t\tthisObj.sourceIndex++;\n\t\t\t\tthisObj.attachNode();\n\t\t\t});\n\t\t\tvar oldNode, parent;\n\t\t\tif ((oldNode = this.preloadNode) && (parent = oldNode.parentNode)) {\n\t\t\t\tvar next = oldNode.nextSibling;\n\t\t\t\toldNode.parentNode.removeChild(oldNode);\n\t\t\t\tparent.insertBefore(node, next);\n\t\t\t} else {\n\t\t\t\tdocument.head.appendChild(node);\n\t\t\t}\n\t\t\tthis.preloadNode = node;\n\t\t} else {\n\t\t\tthis.finish(this);\n\t\t}\n\t};\n\tResourceData.prototype._finish = function(failData) {\n\t\tvar node = this.preloadNode;\n\t\tif (node && node.parentNode) {\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t};\n\twindow.Loader = Loader;\n})();\n"],"sourceRoot":"src"}