{"version":3,"sources":["loader.js"],"names":["Loader","import","id","source","requires","callback","async","defer","ScriptData","init","run","fn","FunctionData","load","type","ResourceData","entries","scripts","functions","resources","LoaderEntry","this","reqByStatus","LOADING","LOADED","FAILED","forEach","status","Array","dep","scriptData","depEntry","data","soft","Boolean","requiredBy","push","isInitialized","isReady","isFinished","isPaused","isAborted","success","call","String","sources","slice","sourceIndex","entry","hasOwnProperty","updateDependency","preloader","scriptNode","execute","preloadNode","prototype","newStatus","checkDependencies","reqs","ready","_init","failed","_ready","finish","failData","_finish","err","window","console","error","e","pause","_pause","resume","_resume","abort","Object","create","constructor","attachNode","thisObj","node","oldNode","parent","next","length","document","createElement","addEventListener","evt","src","getElementById","parentNode","nextSibling","removeChild","insertBefore","head","appendChild","rel","as","href"],"mappings":"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","file":"loader.min.js","sourcesContent":["/**\n* (c) 2021 Taemporus\n*/\n(function() {\n\t'use strict';\n\tvar Loader = {\n\t\t/**\n\t\t * Load and execute an external script once its dependencies have been imported\n\t\t * Can be referred to by others as a dependency via the 'id' specified\n\t\t */\n\t\timport: function(id, source, requires, callback, async, defer) {\n\t\t\t// Create and initialize ScriptData object\n\t\t\treturn (new ScriptData(id, source, requires, callback, async, defer)).init();\n\t\t},\n\t\t/**\n\t\t * Run a specified function once its dependencies have been met imported\n\t\t */\n\t\trun: function(fn, requires, callback) {\n\t\t\t// Create and initialize FunctionData object\n\t\t\treturn (new FunctionData(fn, requires, callback)).init();\n\t\t},\n\t\t/**\n\t\t * Preload a resource of the specified type once a specified set of dependencies has been imported\n\t\t */\n\t\tload: function(type, source, requires, callback) {\n\t\t\t// Create and initialize ResourceData object\n\t\t\treturn (new ResourceData(type, source, requires, callback)).init();\n\t\t},\n\t\tentries: [],\n\t\tscripts: {},\n\t\tfunctions: [],\n\t\tresources: []\n\t};\n\t/**\n\t * Abstract loader entry with dependencies\n\t */\n\tfunction LoaderEntry(requires, callback) {\n\t\tthis.requires = {};\n\t\tthis.reqByStatus = {};\n\t\t[ScriptData.LOADING, ScriptData.LOADED, ScriptData.FAILED].forEach(function(status) {\n\t\t\tthis.reqByStatus[status] = {};\n\t\t}, this);\n\t\t((requires instanceof Array) ? requires : (requires ? [requires] : [])).forEach(function(dep) {\n\t\t\tdep = (typeof dep === 'object' && dep !== null) ? dep : {id: dep};\n\t\t\tvar scriptData = Loader.scripts[dep.id];\n\t\t\tvar depEntry = {\n\t\t\t\tdata: scriptData,\n\t\t\t\tsoft: (typeof dep.soft !== 'undefined') ? Boolean(dep.soft) : false\n\t\t\t};\n\t\t\tthis.requires[dep.id] = depEntry;\n\t\t\tvar status = scriptData ? scriptData.status : ScriptData.LOADING;\n\t\t\tthis.reqByStatus[status][dep.id] = depEntry;\n\t\t\tif (scriptData) {\n\t\t\t\tscriptData.requiredBy.push(this);\n\t\t\t}\n\t\t}, this);\n\t\tthis.callback = (typeof callback === 'function') ? callback : function() {};\n\t\tthis.isInitialized = false;\n\t\tthis.isReady = false;\n\t\tthis.isFinished = false;\n\t\tthis.isPaused = false;\n\t\tthis.isAborted = false;\n\t\tthis.success = void 0;\n\t}\n\tLoaderEntry.prototype.updateDependency = function(id, newStatus) {\n\t\tif (this.requires.hasOwnProperty(id) && this.reqByStatus.hasOwnProperty(newStatus)) {\n\t\t\tvar status;\n\t\t\tfor (status in this.reqByStatus) {\n\t\t\t\tif (this.reqByStatus.hasOwnProperty(status))\n\t\t\t\t\tdelete this.reqByStatus[status][id];\n\t\t\t}\n\t\t\tthis.reqByStatus[newStatus][id] = this.requires[id];\n\t\t}\n\t\tthis.checkDependencies();\n\t};\n\tLoaderEntry.prototype.checkDependencies = function() {\n\t\tvar id, reqs;\n\t\tfor (id in (reqs = this.reqByStatus[ScriptData.FAILED])) {\n\t\t\tif (reqs.hasOwnProperty(id) && !reqs[id].soft) {\n\t\t\t\tthis.ready(reqs[id].data);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfor (id in (reqs = this.reqByStatus[ScriptData.LOADING])) {\n\t\t\tif (reqs.hasOwnProperty(id))\n\t\t\t\treturn;\n\t\t}\n\t\tthis.ready();\n\t};\n\tLoaderEntry.prototype.init = function() {\n\t\tif (this.isInitialized || this.isAborted)\n\t\t\treturn;\n\t\tthis.isInitialized = true;\n\t\tif (typeof this._init === 'function') {this._init();}\n\t\tLoader.entries.push(this);\n\t\tthis.checkDependencies();\n\t\treturn this;\n\t};\n\tLoaderEntry.prototype.ready = function(failed) {\n\t\tif (this.isReady || this.isAborted)\n\t\t\treturn;\n\t\tthis.isReady = true;\n\t\tif (typeof this._ready === 'function') {this._ready(failed);}\n\t};\n\tLoaderEntry.prototype.finish = function(failData) {\n\t\tif (this.isFinished)\n\t\t\treturn;\n\t\tthis.isFinished = true;\n\t\tthis.success = !failData;\n\t\tif (typeof this._finish === 'function') {this._finish(failData);}\n\t\ttry {\n\t\t\tthis.callback.call(this, {success: this.success, failData: (this.success ? void 0 : failData)});\n\t\t} catch (err) {\n\t\t\ttry {window.console.error(err);} catch (e) {}\n\t\t}\n\t};\n\tLoaderEntry.prototype.pause = function() {\n\t\tthis.isPaused = true;\n\t\tif (typeof this._pause === 'function') {this._pause();}\n\t};\n\tLoaderEntry.prototype.resume = function() {\n\t\tthis.isPaused = false;\n\t\tif (typeof this._resume === 'function') {this._resume();}\n\t};\n\tLoaderEntry.prototype.abort = function() {\n\t\tthis.isAborted = true;\n\t\tthis.finish(this);\n\t};\n\t/**\n\t * Externally sourced script\n\t */\n\tfunction ScriptData(id, source, requires, callback, async, defer) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.id = String(id);\n\t\tthis.sources = (source instanceof Array) ? source.slice() : (source ? [source] : []);\n\t\tthis.sourceIndex = 0;\n\t\tthis.status = ScriptData.LOADING;\n\t\tthis.requiredBy = [];\n\t\tLoader.entries.forEach(function(entry) {\n\t\t\tif (entry.requires.hasOwnProperty(this.id)) {\n\t\t\t\tthis.requiredBy.push(entry);\n\t\t\t\tentry.requires[this.id].data = this;\n\t\t\t\tentry.updateDependency(this.id, this.status);\n\t\t\t}\n\t\t}, this);\n\t\tthis.async = (typeof async !== 'undefined') ? Boolean(async) : true;\n\t\tthis.defer = (typeof defer !== 'undefined') ? Boolean(defer) : false;\n\t\tthis.preloader = void 0;\n\t\tthis.scriptNode = void 0;\n\t}\n\t// Inherit from LoaderEntry\n\tScriptData.prototype = Object.create(LoaderEntry.prototype);\n\tScriptData.prototype.constructor = ScriptData;\n\t// Methods\n\tScriptData.prototype._init = function() {\n\t\tthis.preloader = (new ResourceData('script', this.sources)).init();\n\t\tLoader.scripts[this.id] = this;\n\t};\n\tScriptData.prototype._ready = function(failed) {\n\t\tif (failed)\n\t\t\tthis.finish(failed);\n\t\telse {\n\t\t\tif (this.preloader) {\n\t\t\t\tthis.preloader.pause();\n\t\t\t\tthis.sourceIndex = this.preloader.sourceIndex;\n\t\t\t}\n\t\t\tthis.attachNode();\n\t\t}\n\t};\n\tScriptData.prototype.attachNode = function() {\n\t\tif (this.isPaused) {\n\t\t\tthis._resume = this.attachNode;\n\t\t\treturn;\n\t\t}\n\t\tvar thisObj = this;\n\t\tif (this.sourceIndex < this.sources.length) {\n\t\t\tvar node = document.createElement('script');\n\t\t\tthis.scriptNode = node;\n\t\t\tnode.id = this.id;\n\t\t\tnode.async = this.async;\n\t\t\tnode.defer = this.defer;\n\t\t\tnode.addEventListener('load', function(evt) {\n\t\t\t\tthisObj.finish();\n\t\t\t});\n\t\t\tnode.addEventListener('error', function(evt) {\n\t\t\t\tthisObj.sourceIndex++;\n\t\t\t\tthisObj.attachNode();\n\t\t\t});\n\t\t\tnode.src = String(this.sources[this.sourceIndex]);\n\t\t\tvar oldNode = document.getElementById(node.id);\n\t\t\tif (oldNode) {\n\t\t\t\tvar parent = oldNode.parentNode;\n\t\t\t\tvar next = oldNode.nextSibling;\n\t\t\t\toldNode.parentNode.removeChild(oldNode);\n\t\t\t\tparent.insertBefore(node, next);\n\t\t\t} else {\n\t\t\t\tdocument.head.appendChild(node);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.finish(this);\n\t\t}\n\t};\n\tScriptData.prototype._finish = function(failData) {\n\t\tif (this.preloader) {\n\t\t\tthis.preloader.abort();\n\t\t}\n\t\tthis.status = this.success ? ScriptData.LOADED : ScriptData.FAILED;\n\t\tthis.requiredBy.forEach(function(entry) {\n\t\t\tentry.updateDependency(this.id, this.status);\n\t\t}, this);\n\t};\n\tScriptData.LOADING = 0;\n\tScriptData.LOADED = 1;\n\tScriptData.FAILED = -1;\n\t/**\n\t * Inline script\n\t */\n\tfunction FunctionData(fn, requires, callback) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.execute = (typeof fn === 'function') ? fn : function() {};\n\t}\n\t// Inherit from LoaderEntry\n\tFunctionData.prototype = Object.create(LoaderEntry.prototype);\n\tFunctionData.prototype.constructor = FunctionData;\n\t// Methods\n\tFunctionData.prototype._init = function() {\n\t\tLoader.functions.push(this);\n\t};\n\tFunctionData.prototype._ready = function(failed) {\n\t\tthis.finish(failed);\n\t};\n\tFunctionData.prototype._finish = function(failData) {\n\t\tif (this.success) {\n\t\t\ttry {\n\t\t\t\tthis.execute();\n\t\t\t} catch (err) {\n\t\t\t\ttry {window.console.error(err);} catch (e) {}\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * Generic external resource\n\t */\n\tfunction ResourceData(type, source, requires, callback) {\n\t\t// Inherit from LoaderEntry\n\t\tLoaderEntry.call(this, requires, callback);\n\t\t// Own properties\n\t\tthis.type = String(type);\n\t\tthis.sources = (source instanceof Array) ? source.slice() : (source ? [source] : []);\n\t\tthis.sourceIndex = 0;\n\t\tthis.preloadNode = void 0;\n\t}\n\t// Inherit from LoaderEntry\n\tResourceData.prototype = Object.create(LoaderEntry.prototype);\n\tResourceData.prototype.constructor = ResourceData;\n\t// Methods\n\tResourceData.prototype._init = function() {\n\t\tLoader.resources.push(this);\n\t};\n\tResourceData.prototype._ready = function(failed) {\n\t\tif (failed)\n\t\t\tthis.finish(failed);\n\t\telse\n\t\t\tthis.attachNode();\n\t};\n\tResourceData.prototype.attachNode = function() {\n\t\tif (this.isPaused) {\n\t\t\tthis._resume = this.attachNode;\n\t\t\treturn;\n\t\t}\n\t\tvar thisObj = this;\n\t\tif (this.sourceIndex < this.sources.length) {\n\t\t\tvar node = document.createElement('link');\n\t\t\tnode.rel = 'preload';\n\t\t\tnode.as = 'script';\n\t\t\tnode.href = String(this.sources[this.sourceIndex]);\n\t\t\tnode.addEventListener('load', function(evt) {\n\t\t\t\tthisObj.finish();\n\t\t\t});\n\t\t\tnode.addEventListener('error', function(evt) {\n\t\t\t\tthisObj.sourceIndex++;\n\t\t\t\tthisObj.attachNode();\n\t\t\t});\n\t\t\tvar oldNode, parent;\n\t\t\tif ((oldNode = this.preloadNode) && (parent = oldNode.parentNode)) {\n\t\t\t\tvar next = oldNode.nextSibling;\n\t\t\t\toldNode.parentNode.removeChild(oldNode);\n\t\t\t\tparent.insertBefore(node, next);\n\t\t\t} else {\n\t\t\t\tdocument.head.appendChild(node);\n\t\t\t}\n\t\t\tthis.preloadNode = node;\n\t\t} else {\n\t\t\tthis.finish(this);\n\t\t}\n\t};\n\tResourceData.prototype._finish = function(failData) {\n\t\tvar node = this.preloadNode;\n\t\tif (node && node.parentNode) {\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t};\n\twindow.Loader = Loader;\n})();\n"],"sourceRoot":"src"}